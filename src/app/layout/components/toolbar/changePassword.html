<div class="dialog-content-wrapper">
  <mat-toolbar class="mat-accent m-0">
    <mat-toolbar-row fxFlex fxLayout="row" fxLayoutAlign="space-between center">
      <span class="title dialog-title">{{'CHANGEPASSWORDTITLE' | translate }}</span>
      <button mat-icon-button (click)="matDialogRef.close()" aria-label="Close dialog">
        <mat-icon>close</mat-icon>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>

  <div mat-dialog-content class="p-16 pb-0 m-0" fusePerfectScrollbar>
    <ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#377B2B" type="ball-clip-rotate" [fullScreen]="true">
      <p style="color: white"> {{'LOADING' | translate }} </p>
    </ngx-spinner>
    <form class="event-form w-100-p" fxLayout="column" fxLayoutAlign="start" fxFlex="1 0 auto" [formGroup]="rpform"
      #cpformForm="ngForm">
      <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto">
        <mat-form-field appearance="outline" fxFlex="100" class="pl-4">
          <mat-label>{{'CURRENTPASSWORD' | translate }}</mat-label>
          <input type="text" matInput formControlName="currentPassword" required>
          <mat-error *ngIf="rpform.get('currentPassword').hasError('required') &&
          rpform.get('currentPassword').touched">
            <b>{{'CURRENTPASSWORDREQUIRED' | translate }}!</b>
          </mat-error>
          <mat-error *ngIf="!rpform.get('currentPassword').hasError('required') && 
          rpform.get('currentPassword').hasError('InvalidPassword')">
            <b>{{'INVALIDPASSWORD' | translate }}!</b>
          </mat-error>
        </mat-form-field>
      </div>

      <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto">
        <mat-form-field appearance="outline" fxFlex="100" class="pl-4">
          <mat-label>{{'NEWPASSWORD' | translate }}</mat-label>
          <input type="password" matInput formControlName="newPassword" required>
          <mat-error *ngIf="rpform.get('newPassword').hasError('required') &&
          rpform.get('newPassword').touched">
            <b>{{'NEWPASSWORDREQUIRED' | translate }}!</b>
          </mat-error>
          <mat-error *ngIf="!rpform.get('newPassword').hasError('required') &&
          rpform.get('newPassword').hasError('minlength')">
            <b>{{'6CHARACTERLONG' | translate }}</b>
          </mat-error>
        </mat-form-field>
      </div>

      <div fxLayout="row" fxLayoutAlign="start center" fxFlex="0 0 auto">
        <mat-form-field appearance="outline" fxFlex="100" class="pl-4">
          <mat-label>{{'CONFIRMNEWPASSWORD' | translate }}</mat-label>
          <input type="password" matInput formControlName="confirmNewPassword" required>
          <mat-error *ngIf="rpform.get('confirmNewPassword').hasError('required') &&
          rpform.get('confirmNewPassword').touched">
            <b>{{'CONFIRMNEWPASSWORDREQUIRED' | translate }}!</b>
          </mat-error>
          <mat-error *ngIf="!rpform.get('confirmNewPassword').hasError('required') && 
          rpform.get('confirmNewPassword').hasError('passwordsNotMatching')">
            <b>{{'PASSWORDMUSTMATCH' | translate }}!</b>
          </mat-error>
        </mat-form-field>
      </div>
    </form>
  </div>

  <div mat-dialog-actions class="m-0 p-16" fxLayout="row" fxLayoutAlign="center center">
    <button mat-raised-button color="accent" [disabled]="rpform.invalid" (click)="changePasswordConfirm()">
      {{'SUBMIT' | translate }}
    </button>

    <button mat-raised-button style="background-color: #DCDCDC" (click)="matDialogRef.close()">
      {{'CANCEL' | translate }}
    </button>
  </div>
</div>